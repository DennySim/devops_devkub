# 12.3 Развертывание кластера на собственных серверах, лекция 1


Описать требования к кластеру

Требования:

- База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
- Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
- Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
- Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

Дополнителные условия:
- Master node - 2cpu/ram 2Gb/HDD 50gb
- Worker node - 1cpu/ram 1Gb/HDD 100gb

Полагаем, что компоненты приложения потребляют следующие дисковаые ресурсы:
- БД - 40Gb
- Cache - 10Gb
- Frontend - 5Gb
- Backend - 5Gb

Т.о. сумма полезной нагрузки:
- 17 cores cpu
- 27.3 Gb ram
- 225 Gb hdd


## Расчет

С учетом системной нагрузки подходит worker-нода со следующими характеристкиами:
- 6 cores cpu
- 6 Gb ram
- 160 Gb hdd (Worker-100gb, payload 60Gb(40+10+5+5Gb))

Получается 7 нод с учетом резервной ноды.

Итого стоимость по яндекс c 2-мя master-нодами:  
7 (worker) x 6380 = 44660р  
2 (master) x 2000 = 4000р
### ИТОГО: 48660р/мес

